import"./index.esm-DNswNO0L.js";import{T as p,d as w,b as i,g as y,c as I,f as T,s as v}from"./firebase-epegSNEt.js";const m=document.getElementById("addTransaction");let f=document.getElementById("submitTxn");m.addEventListener("submit",async t=>{t.preventDefault(),f.textContent="Processing...";const n=document.getElementById("date"),o=document.getElementsByName("transaction"),g=document.getElementById("amount"),c=document.getElementById("category");let e=null;o[0].checked&&(e=!1),o[1].checked&&(e=!0);const u=p.fromDate(new Date(n.value)),a=parseFloat(g.value),d=JSON.parse(localStorage.getItem("currentUser")),l=w(i,"Users",d.user.uid),r=await y(l),s=r.data().balance;if(console.log(u,e,a,c.value),D(e,c.value)&&E(e,a,s)){const b=I(i,"Users",d.user.uid,"Transaction");await T(b,{date:u,txnType:e,amount:a,category:c.value}),await v(l,{...r.data(),balance:e?s+a:s-a}),window.alert("Transaction Added")}f.textContent="Submit",m.reset()});function D(t,n){return console.log(t,n),t==!1&&n=="income"?(window.alert("Cannot debit income"),!1):!0}function E(t,n,o){return!t&&o<n?(window.alert("Insufficient Funds"),!1):!0}
